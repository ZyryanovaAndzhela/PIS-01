![Image alt](https://github.com/ZyryanovaAndzhela/PIS-01/raw/main/Схема_данных_в_БД/Схема.jpg)

# Описание структуры базы данных.
Данная база данных реализует информационную систему предоставления государственных услуг. В ней представлены сущности, такие как пользователь, администратор, госслужащий, заявки, услуги и правила, регулирующие их предоставление.

# Таблицы.
## Таблица account.
Хранит данные учётной записи: логин, пароль, роль и ФИО (пользователь, администратор, госслужащий). Используется всеми участниками системы.

**Атрибуты**:
* _id_ — идентификатор учётной записи (primary key).
* _login_ — логин учётной записи (уникальный, не может быть пустым).
* _password_ — пароль учётной записи (не может быть пустым).
* _role_ — роль учётной записи (не может быть пустой).
* _full_name_ — ФИО владельца(не может быть пустой).

**Связи**:
* user.account_id → account.id
* government_employee.account_id → account.id
* administrator.account_id → account.id

При удалении аккаунта соответствующий пользователь, администратор или госслужащий тоже удаляется (ON DELETE CASCADE).

## Таблица user.
Представляет гражданина, подающего заявки на государственные услуги.

**Атрибуты**:
* _id_ — идентификатор пользователя (primary key).
* _account_id_ — идентификатор учётной записи пользователя.
* _citizenship_ — гражданство пользователя.
* _passport_number_ — номер паспорта.
* _INN_ — ИНН.
* _purpose_visit_ — причина прилета.
* _date_birth_ — дата рождения.
* _email_ — электронная почта.
* _phone_number_ — номер телефона.

**Связи**:
* Привязана к account через account_id.

## Таблица government_employee.
Представляет госслужащего, обрабатывающего заявки на услуги.

**Атрибуты**:
* _id_ — идентификатор госслужащего (primary key).
* _account_id_ — идентификатор учётной записи госслужащего.
* _department_ — отдел.
* _post_ — должность.

**Связи**:
* Привязана к account через account_id.

## Таблица administrator.
Представляет администратора, управляющего системой и услугами.

**Атрибуты**:
* _id_ — идентификатор администратора (primary key).
* _account_id_ — идентификатор учётной записи администратора.
* _role_ — роль.

**Связи**:
* Привязана к account через account_id.

## Таблица service.
Описывает государственную услугу: название, описание, даты начала и окончания.

**Атрибуты**:
* _id_ — идентификатор услуги (primary key).
* _description_ — описание услуги.
* _start_date_ — дата начала предоставления услуги.
* _end_date_ — дата окончания предоставления услуги.
* _prise_ — цена.
* _administratot_id_ — идентификатор администратора, управляющего услугой.

**Связи**:
* Связана с administrator через admin_id.

## Таблица service_rule.
Описывает правило предоставления услуги: Параметр пользователя, оператор сравнения (>, =, <), значение и срок действия.

**Атрибуты**:
* _id_ — идентификатор правила (primary key).
* _description_ — описание правила.
* _condition_type_ — условия сравнения.
* _condition_values_ — значения для сравнения.
* _operator_values_ — оператор сравнения (>, =, <).
* _term_of_service_provision_ — срок действия правила.
* _service_id_ — идентификатор услуги, к которой привязано правило (не может быть пустым).

**Связи**:
* Привязано к service через service_id.

## Таблица application.
Заявка на услугу, подаётся пользователем.

**Атрибуты**:
* _id_ — идентификатор заявки (primary key).
* _status_ — статус заявки.
* _date_creation_ — дата подачи заявки.
* _result_ — результат обработки заявки.
* _date_completion_ — дата завершения заявки.
* _user_id_ — идентификатор пользователя, подающего заявку.
* _service_id_ — идентификатор услуги, на которую подаётся заявка.
* _employee_id_ — идентификатор госслужащего, обрабатывающего заявку.
* _deadline_ — Приблизительный период времени, в течение которого ожидается завершение оказания услуги по заявке.

**Связи**:
* user_id → user.id — пользователь, подающий заявку.
* service_id → service.id — услуга, на которую подаётся заявка.
* employee_id → government_employee.id — госслужащий, обрабатывающий заявку.

При удалении пользователя, услуги или госслужащего — ссылка обнуляется (ON DELETE SET NULL), чтобы сохранить историю заявок.

## Общие связи в системе:
- Один account может быть привязан к одному из следующих: user, administrator или government_employee.
- Один user может подать несколько заявок (application).
- Одна service может быть связана с несколькими rule (через service_id).
- Одно rule может использоваться в нескольких service.
- Один administrator может управлять несколькими service (через admin_id).

## Ссылки на таблицы:
- account.id < user.account_id (DELETE CASCADE).
- account.id < government_employee.account_id (DELETE CASCADE).
- account.id < administrator.account_id (DELETE CASCADE).
- service.id < rule.service_id (DELETE CASCADE).
- user.id < application.user_id (DELETE SET NULL).
- service.id < application.service_id (DELETE SET NULL).
- government_employee.id < application.employee_id (DELETE SET NULL).
