![Image alt](https://github.com/ZyryanovaAndzhela/PIS-01/raw/main/Диаграмма_классов/диаграмма.png) 

# Модели.

1. **Account (Учетная запись)**: содержит основные данные для аутентификации и идентификации пользователя в системе.

Поля:
* _fullName_: Полное имя пользователя (Фамилия, Имя, Отчество).
* _login_: Уникальный логин пользователя для входа в систему.
* _password_: Пароль пользователя для аутентификации в системе (должен храниться в зашифрованном виде).

2. **User (Пользователь)**: представляет лицо, запрашивающее государственную услугу.

Поля:
* _email_ : Адрес электронный почты.
* _number_ : Номер телефона пользователя.
*	_inn_: Идентификационный номер налогоплательщика.
* _citizenship_: Гражданство пользователя.
* _visitPurpose_: Цель визита в страну (например, обучение, работа, туризм и т.п.).
*	_passportNumber_: Номер паспорта пользователя.
* _dateOfBirth_: Дата рождения пользователя.

3. **CivilServant (Госслужащий)**: представляет сотрудника государственного учреждения, ответственного за обработку заявок на услуги.

Поля:
*	_department_: Название отдела, в котором работает госслужащий.
* _position_: Должность, занимаемая госслужащим в учреждении.

4. **Administrator (Администратор)**: представляет лицо, обладающее правами на управление основными справочниками системы, такими как Дорожные карты и Правила дорожной карты.

Поля:
*	_role_: Определяет общие права и уровень доступа администратора в системе (например, “СуперАдмин”, “Администратор дорожных карт”, “Администратор пользователей”).

5. **Application (Заявка на услугу)**: представляет собой запрос от пользователя на получение определенной государственной услуги.

Поля:
*	_status_: Статус заявки (например, “Новая”, “В обработке”, “Завершена”, “Отклонена”).
*	_dateOfCreation_: Дата создания заявки в системе.
*	_completionDate_: Дата завершения обработки заявки.
*	_plannedDeadline_ : Приблизительный период времени, в течение которого ожидается завершение оказания услуги по заявке. 
*	_result_ : Результат предоставления услуги (текстовое описание).

6. **Service (Услуга)**: представляет собой стандартизированный набор шагов и правил для оказания определенной государственной услуги.

Поля:
*	_name_: Краткое и понятное наименование услуги, отражающее суть предоставляемой услуги.
*	_description_: Подробное текстовое описание услуги. Включает:
    - Цель дорожной карты (какая услуга предоставляется).
    - Перечень шагов, которые необходимо выполнить для оказания услуги.
    - Формы документов, необходимых для оказания услуги.
    - Контактную информацию для получения консультаций и решения возникающих вопросов.
* _dateOfCreation_ : Дата начала действия услуги.
* _completionDate_ : Дата окончания действия услуги.
* _price_: Стоимость государственной пошлины или иного платежа за услугу.

7. **ServiceRule (Правило услуги)**: описывает конкретное условие, которое необходимо выполнить в рамках оказания определенной услуги.

Поля:
*	_description_: Текстовое описание правила, объясняющее его суть и цель.
*	_valueOfCondition_: Значение, с которым сравнивается параметр (например, “РФ”, “18”).
*	_conditionType_ : Тип параметра, который проверяется в правиле (например, “Гражданство”, “Возраст”).
*	_conditionOperator_ : Определяет тип сравнения, используемого для проверки условия (например, "<", ">" "=>" и т.д.)
*	_termOfRendering_: Срок, в течение которого должна быть оказана услуга при выполнении данного правила (например, “10 дней”).

8. **Status (Статус)**: перечисление

Поля:
* _New_: Заявка только создана и еще не находится в обработке.
* _In_progress_: Заявка находится в процессе обработки госслужащим.
* _Completed_: Заявка успешно обработана и услуга предоставлена.
* _Rejected_: В предоставлении услуги по заявке отказано.

# Контроллеры.

1. **ApplicationController**: Обрабатывает запросы, связанные с управлением заявками.

Методы:
* _CreateApplication(request: CreateApplicationRequestDTO): String_: Создает новую заявку.
* _pdateApplicationStatus(request: UpdateApplicationStatusRequestDTO): String_: Обновляет статус существующей заявки.
* _GetApplicationDetails(request: GetApplicationDetailsRequestDTO): String_: Получает детали конкретной заявки.

2. **UserController**: Обрабатывает запросы, связанные с управлением пользователями.

Методы:
* _RegisterUser(request: RegisterUserRequestDTO): String_: Регистрирует нового пользователя.
* _UpdateContactInfo(request: UpdateContactInfoRequestDTO): String_: Обновляет контактную информацию существующего пользователя.

3. **AuthenticationController**: Обрабатывает запросы, связанные с аутентификацией пользователей.

Методы:
* _Login(request: LoginRequestDTO): String_ : Аутентифицирует пользователя и возвращает информацию об учетной записи.

4. **RuleController**: Обрабатывает запросы, связанные с управлением правилами услуг.

Методы:
* _CreateRule(request: CreateRuleRequestDTO): String_ : Создает новое правило для услуги.

# Сервисы.

1.**ApplicationService**: Управляет бизнес-логикой, связанной с заявками.

Методы:
* _CreateApplication(serviceName: String, userEmail: String): Application_ : Создает новую заявку, используя имя услуги и email пользователя.
* _GetApplicationDetails(dateOfCreation: Date, service: Service): Application_ : Получает детали заявки по дате создания и услуге.
* _UpdateApplicationStatus(dateOfCreation: Date, service: Service, status: Status): Application_ : Обновляет статус заявки по дате создания, услуге и новому статусу.

2.**UserService**: Управляет бизнес-логикой, связанной с пользователями.

Методы:
* _RegisterUser(userData: User): User_ : Регистрирует нового пользователя, используя данные пользователя.
* _UpdateContactInfo(email: String, number: int): User_ : Обновляет контактную информацию пользователя по email и номеру телефона.

3.**AuthenticationService**: Управляет бизнес-логикой, связанной с аутентификацией.

Методы:
* _Authenticate(login: String, password: String): Account_ : Аутентифицирует пользователя по логину и паролю.

4.**RuleService**: Управляет бизнес-логикой, связанной с правилами услуг.

Методы:
* _CreateRule(ruleData: ServiceRule, serviceName: String): ServiceRule_ : Создает новое правило для услуги, используя данные правила и имя услуги.
* _GetRulesByServiceName(serviceName: String): List<ServiceRule>_ : Получает список правил для услуги по ее имени.

# Репозитории.

1.**ApplicationRepository**: Предоставляет методы для доступа к данным о заявках в базе данных.

Методы:
* _FindByDateOfCreationAndService(dateOfCreation: Date, service: Service): Optional<Application>_ : Находит заявку по дате создания и услуге.
* _Save(application: Application): Application_ : Сохраняет новую или обновляет существующую заявку.
* _FindAllByService(service: Service): List<Application>_ : Находит все заявки для конкретной услуги.
* _FindAllByUser(user: User): List<Application>_ : Находит все заявки, созданные конкретным пользователем.
* _FindAll(): List<Application>_ : Находит все заявки.

2. **UserRepository**: Предоставляет методы для доступа к данным о пользователях в базе данных.

Методы:
* _Save(user: User): User_ : Сохраняет нового или обновляет существующего пользователя.
* _FindByEmail(email: String): Optional<User>_ : Находит пользователя по email.

3. **AccountRepository**: 

Методы:
* 
* 

4. **ServiceRepository**: 

Методы:
* 
* 

5. **RuleRepository**: 

Методы:
* 
* 

# DTO.

1. CreateApplicationRequestDTO
2. UpdateApplicationStatusRequestDTO
3. GetApplicationDetailsRequestDTO 
4. RegisterUserRequestDTO
5. UpdateContactInfoRequestDTO
6. LoginRequestDTO
7. CreateRuleRequestDTO

# Связи между классами:
1. **User - Account (Композиция)**: Пользователь не может логически существовать без учетной записи. Учетная запись содержит основную информацию для идентификации и аутентификации пользователя. Если учетная запись удалена (например, пользователь решил удалить свой профиль), то и информация о пользователе должна быть удалена.
2. **CivilServant - Account (Композиция)**: Аналогично Пользователю, Госслужащий не может существовать без учетной записи. Учетная запись предоставляет доступ к системе для выполнения служебных обязанностей. Если учетная запись Госслужащего удалена (например, сотрудник уволился), данные сотрудника удаляются.
3. **Administrator - Account (Композиция)**: Администратор не может существовать без Учетной записи. Удаление Учетной записи влечет за собой удаление связанных с ней данных об Администраторе.
4. **User - Application (Ассоциация)**: Пользователь инициирует Заявку. Однако, Заявка может сохранять свою ценность для целей отчетности, даже если Пользователь удален из системы. Заявка может содержать информацию, которая остается важной, даже если связь с конкретным Пользователем потеряна.
5. **CivilServant - Application (Ассоциация)**: Госслужащий обрабатывает Заявку. Однако, Заявка не является частью Госслужащего. Заявка может быть переназначена другому сотруднику, или оставаться в системе даже после увольнения Госслужащего.
6. **Application - Service (Ассоциация)**: Заявка относится к определенной Услуге. Услуга предоставляет контекст для Заявки. Сама Услуга может существовать независимо от Заявок (например, Услуга может быть создана, но на нее еще не подано ни одной Заявки).
7. **Service - ServiceRule (Композиция)**: ПравилоУслуги определяет, как должна быть предоставлена определенная Услуга. Правило не имеет смысла вне контекста Услуги. Если Услуга удаляется, то все связанные с ней ПравилаУслуги также должны быть удалены.
8. **Application - Status (Ассоциация)**: Заявка имеет статус. Заявка не владеет статусом, а просто ссылается на один из предопределенных статусов из enum Status. Статус описывает текущее состояние заявки.
9. **ApplicationController - Service (Зависимость)**: ApplicationController использует Service для получения информации об услуге при создании новой заявки. Например, контроллер вызывает Service для отображения списка доступных услуг или для получения стоимости услуги.
10. **ApplicationController - Application (Зависимость)**: Контроллер получает и передает объекты Application для отображения деталей заявки, обновления статуса и т.д.
11. **ApplicationController - User (Зависимость)**: При создании новой заявки, ApplicationController использует информацию о пользователе (User) для связывания заявки с конкретным пользователем.
12. **ApplicationController - ApplicationRepository (Зависимость)**: ApplicationController использует ApplicationRepository для сохранения новых заявок в базе данных, обновления существующих заявок и получения информации о заявках.
13. **ApplicationRepository - Application (Зависимость)**: ApplicationRepository оперирует объектами Application, извлекая их из базы данных, сохраняя новые объекты и обновляя существующие. Application является основной сущностью, с которой работает репозиторий.
14. **UserRepository - User (Зависимость)**: UserRepository оперирует объектами User, извлекая их из базы данных, сохраняя новые объекты и обновляя существующие. User является основной сущностью, с которой работает репозиторий.
15. **UserController - User (Зависимость)**: Контроллер обрабатывает запросы, связанные с объектами User, например, для обновления контактной информации.
16. **UserController - UserRepository (Зависимость)**: UserController использует UserRepository для сохранения новых пользователей в базе данных, обновления существующих пользователей и получения информации о пользователях.

# Описание диаграммы:
1. Пользователь (User) входит через Account.Authenticate().
2. Пользователь через ApplicationController.CreateApplication() создает Application на Service. Данные сохраняются через ApplicationRepository.SaveApplication().
3. Госслужащий (CivilServant) обрабатывает заявку, используя CivilServant.ProcessApplication() и обновляет статус через CivilServant.UpdateApplicationStatus(), что сохраняется через ApplicationRepository.UpdateApplication().
4. Система использует ServiceRule.Evaluate() и ServiceRule.ApplyRule() для определения параметров оказания услуги.
5. Администратор управляет Service и ServiceRule с помощью соответствующих методов Administrator.
6. UserController вызывает RegisterUser().
