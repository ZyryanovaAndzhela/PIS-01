![Image alt](https://github.com/ZyryanovaAndzhela/PIS-01/raw/main/Диаграмма_классов/Диаграмма_классов.png) 

# Модели.

1. **Account (Учетная запись)**: содержит основные данные для аутентификации и идентификации пользователя в системе.

Поля:
* _fullName_: Полное имя пользователя (Фамилия, Имя, Отчество).
* _login_: Уникальный логин пользователя для входа в систему.
* _password_: Пароль пользователя для аутентификации в системе (должен храниться в зашифрованном виде).

2. **User (Пользователь)**: представляет лицо, запрашивающее государственную услугу.

Поля:
* _email_ : Адрес электронный почты.
* _number_ : Номер телефона пользователя.
*	_inn_: Идентификационный номер налогоплательщика.
* _citizenship_: Гражданство пользователя.
* _visitPurpose_: Цель визита в страну (например, обучение, работа, туризм и т.п.).
*	_passportNumber_: Номер паспорта пользователя.
* _dateOfBirth_: Дата рождения пользователя.
* _account_: Учетная запись пользователя (Account), связанная с этим пользователем.

3. **CivilServant (Госслужащий)**: представляет сотрудника государственного учреждения, ответственного за обработку заявок на услуги.

Поля:
*	_department_: Название отдела, в котором работает госслужащий.
* _position_: Должность, занимаемая госслужащим в учреждении.
* _account_: Учетная запись госслужащего (Account), связанная с этим госслужащим.

4. **Administrator (Администратор)**: представляет лицо, обладающее правами на управление основными справочниками системы, такими как Дорожные карты и Правила дорожной карты.

Поля:
*	_role_: Определяет общие права и уровень доступа администратора в системе (например, “СуперАдмин”, “Администратор дорожных карт”, “Администратор пользователей”).
*	_account_: Учетная запись администратора (Account), связанная с этим администратором.

5. **Application (Заявка на услугу)**: представляет собой запрос от пользователя на получение определенной государственной услуги.

Поля:
*	_status_: Статус заявки (например, “Новая”, “В обработке”, “Завершена”, “Отклонена”).
*	_dateOfCreation_: Дата создания заявки в системе.
*	_completionDate_: Дата завершения обработки заявки.
*	_plannedDeadline_ : Приблизительный период времени, в течение которого ожидается завершение оказания услуги по заявке. 
*	_result_ : Результат предоставления услуги (текстовое описание).
*	_service_: Услуга (Service), на которую подана заявка.

6. **Service (Услуга)**: представляет собой стандартизированный набор шагов и правил для оказания определенной государственной услуги.

Поля:
*	_name_: Краткое и понятное наименование услуги, отражающее суть предоставляемой услуги.
*	_description_: Подробное текстовое описание услуги. Включает:
    - Цель дорожной карты (какая услуга предоставляется).
    - Перечень шагов, которые необходимо выполнить для оказания услуги.
    - Формы документов, необходимых для оказания услуги.
    - Контактную информацию для получения консультаций и решения возникающих вопросов.
* _dateOfCreation_ : Дата начала действия услуги.
* _completionDate_ : Дата окончания действия услуги.
* _price_: Стоимость государственной пошлины или иного платежа за услугу.
* _rules_: Список правил (ServiceRule), определяющих условия предоставления услуги.

7. **ServiceRule (Правило услуги)**: описывает конкретное условие, которое необходимо выполнить в рамках оказания определенной услуги.

Поля:
*	_description_: Текстовое описание правила, объясняющее его суть и цель.
*	_valueOfCondition_: Значение, с которым сравнивается параметр (например, “РФ”, “18”).
*	_conditionType_ : Тип параметра, который проверяется в правиле (например, “Гражданство”, “Возраст”).
*	_conditionOperator_ : Определяет тип сравнения, используемого для проверки условия (например, "<", ">" "=>" и т.д.)
*	_termOfRendering_: Срок, в течение которого должна быть оказана услуга при выполнении данного правила (например, “10 дней”).

8. **Status (Статус)**: перечисление

Поля:
* _New_: Заявка только создана и еще не находится в обработке.
* _In_progress_: Заявка находится в процессе обработки госслужащим.
* _Completed_: Заявка успешно обработана и услуга предоставлена.
* _Rejected_: В предоставлении услуги по заявке отказано.

# Контроллеры.

1. **ApplicationController**: Обрабатывает запросы, связанные с управлением заявками.

Методы:
* _CreateApplication(request: CreateApplicationRequestDTO): String_: Создает новую заявку.
* _UpdateApplicationStatus(request: UpdateApplicationStatusRequestDTO): String_: Обновляет статус существующей заявки.
* _GetApplicationDetails(request: GetApplicationDetailsRequestDTO): String_: Получает детали конкретной заявки.

2. **UserController**: Обрабатывает запросы, связанные с управлением пользователями.

Методы:
* _RegisterUser(request: RegisterUserRequestDTO): String_: Регистрирует нового пользователя.
* _UpdateContactInfo(request: UpdateContactInfoRequestDTO): String_: Обновляет контактную информацию существующего пользователя.

3. **AuthenticationController**: Обрабатывает запросы, связанные с аутентификацией пользователей.

Методы:
* _Login(request: LoginRequestDTO): String_ : Аутентифицирует пользователя и возвращает информацию об учетной записи.

4. **RuleController**: Обрабатывает запросы, связанные с управлением правилами услуг.

Методы:
* _CreateRule(request: CreateRuleRequestDTO): String_ : Создает новое правило для услуги.

# Сервисы.

1.**ApplicationService**: Управляет бизнес-логикой, связанной с заявками.

Методы:
* _CreateApplication(serviceName: String, userEmail: String): Application_ : Создает новую заявку, используя имя услуги и email пользователя.
* _GetApplicationDetails(dateOfCreation: Date, service: Service): Application_ : Получает детали заявки по дате создания и услуге.
* _UpdateApplicationStatus(dateOfCreation: Date, service: Service, status: Status): Application_ : Обновляет статус заявки по дате создания, услуге и новому статусу.

2.**UserService**: Управляет бизнес-логикой, связанной с пользователями.

Методы:
* _RegisterUser(userData: User): User_ : Регистрирует нового пользователя, используя данные пользователя.
* _UpdateContactInfo(email: String, number: int): User_ : Обновляет контактную информацию пользователя по email и номеру телефона.

3.**AuthenticationService**: Управляет бизнес-логикой, связанной с аутентификацией.

Методы:
* _Authenticate(login: String, password: String): Account_ : Аутентифицирует пользователя по логину и паролю.

4.**RuleService**: Управляет бизнес-логикой, связанной с правилами услуг.

Методы:
* _CreateRule(ruleData: ServiceRule, serviceName: String): ServiceRule_ : Создает новое правило для услуги, используя данные правила и имя услуги.
* _GetRulesByServiceName(serviceName: String): List<ServiceRule>_ : Получает список правил для услуги по ее имени.

# Репозитории.

1.**ApplicationRepository**: Предоставляет методы для доступа к данным о заявках в базе данных.

Методы:
* _FindByDateOfCreationAndService(dateOfCreation: Date, service: Service): Optional<Application>_ : Находит заявку по дате создания и услуге.
* _Save(application: Application): Application_ : Сохраняет новую или обновляет существующую заявку.
* _FindAllByService(service: Service): List<Application>_ : Находит все заявки для конкретной услуги.
* _FindAllByUser(user: User): List<Application>_ : Находит все заявки, созданные конкретным пользователем.
* _FindAll(): List<Application>_ : Находит все заявки.

2. **UserRepository**: Предоставляет методы для доступа к данным о пользователях в базе данных.

Методы:
* _Save(user: User): User_ : Сохраняет нового или обновляет существующего пользователя.
* _FindByEmail(email: String): Optional<User>_ : Находит пользователя по email.

3. **AccountRepository**: Предоставляет методы для доступа к данным об учетных записях в базе данных.

Методы:
* _FindByLogin(login: String): Optional<Account>_ : Находит учетную запись по логину.
* _Save(account: Account): Account_ : Сохраняет новую или обновляет существующую учетную запись.

4. **ServiceRepository**: Предоставляет методы для доступа к данным об услугах в базе данных.

Методы:
* _FindByName(name: String): Optional<Service>_ : Находит услугу по имени.
* _Save(service: Service): Service_ : Сохраняет новую или обновляет существующую услугу.

5. **RuleRepository**: Предоставляет методы для доступа к данным о правилах услуг в базе данных.

Методы:
* _Save(rule: ServiceRule): ServiceRule_ : Сохраняет новое или обновляет существующее правило услуги.
* _FindAllByServiceName(serviceName: String): List<ServiceRule>_ : Находит все правила для конкретной услуги по ее имени.

# DTO.

1. **CreateApplicationRequestDTO**: Передает данные, необходимые для создания новой заявки.
2. **UpdateApplicationStatusRequestDTO**: Передает данные, необходимые для обновления статуса заявки.
3. **GetApplicationDetailsRequestDTO**: Передает данные, необходимые для получения деталей заявки.
4. **RegisterUserRequestDTO**: Передает данные, необходимые для регистрации нового пользователя.
5. **UpdateContactInfoRequestDTO**: Передает данные, необходимые для обновления контактной информации пользователя.
6. **LoginRequestDTO**: Передает данные, необходимые для аутентификации пользователя.
7. **CreateRuleRequestDTO**: Передает данные, необходимые для создания нового правила услуги.

# Связи между классами:

1. **User - Account** (Композиция): Каждый User обязательно имеет Account, и жизненный цикл Account напрямую связан с User. Если User удаляется, то и связанный с ним Account должен быть удален. Account не может существовать “сам по себе”.

2. **CivilServant - Account** (Композиция): CivilServant также имеет Account, и эта связь является обязательной. Если госслужащий увольняется, его учетная запись должна быть удалена.

3. **Administrator - Account** (Композиция): Так же, как и для User и CivilServant. Administrator имеет Account, и их жизненные циклы связаны.

4. **User - Application** (Ассоциация): Пользователь может иметь несколько заявок. Однако заявки не являются частью самого пользователя. Заявка может существовать независимо от пользователя (например, ее могут обрабатывать другие пользователи). Поэтому используется ассоциация. Связь реализуется через сервисы и репозитории.

5. **CivilServant - Application** (Ассоциация): Госслужащий обрабатывает заявки. Заявки существуют независимо от госслужащего. Связь реализуется через сервисы и репозитории.

6. **Application - Service** (Аггрегация): Каждая заявка относится к конкретной услуге. Без услуги заявка не имеет смысла. Услуга может быть определена в системе, даже если на нее еще нет ни одной заявки.

7. **Service - ServiceRule** (Композиция): Правила услуги являются частью услуги и не могут существовать отдельно от нее. Жизненный цикл правила услуги зависит от жизненного цикла самой услуги.

8. **Application - Status** (Ассоциация): Заявка имеет статус, но статус сам по себе существует независимо (например, можно определить новые статусы).

9. **ApplicationController – ApplicationService** (Зависимость): ApplicationController использует функциональность, предоставляемую ApplicationService. Контроллер делегирует логику сервису.

10. **UserController – UserService** (Зависимость): UserController использует функциональность, предоставляемую UserService.

11. **AuthenticationController – AuthenticationService** (Зависимость): AuthenticationController использует функциональность, предоставляемую AuthenticationService.

12. **RuleController – RuleService** (Зависимость): RuleController использует функциональность, предоставляемую RuleService.

13. **ApplicationService – ApplicationRepository** (Зависимость): ApplicationService использует ApplicationRepository для доступа к данным о заявках.

14. **UserService – UserRepository** (Зависимость): UserService использует UserRepository для доступа к данным о пользователях.

15. **AuthenticationService – AccountRepository** (Зависимость): AuthenticationService использует AccountRepository для доступа к данным об учетных записях.

16. **RuleService – RuleRepository** (Зависимость): RuleService использует RuleRepository для доступа к данным о правилах услуг.

17. **RuleService – ServiceRepository** (Зависимость): RuleService использует ServiceRepository для доступа к данным об услугах (например, чтобы получить имя услуги).

18. **Все Контроллеры – Соответствующие DTO** (Зависимость): Контроллеры используют DTO для получения данных от клиента.
